<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Lukashian Calendar</title>
</head>

<body>
    <h1>The Lukashian Calendar</h1>
    <h2>Lite JS implementation</h2>
    <div>
        <label>Start Gregorian Year:</label>
        <input type="number" id="startYear" value="2025">
        <label>End Gregorian Year:</label>
        <input type="number" id="endYear" value="2035">
        <button id="precomputeBtn">Precompute</button>
    </div>
    <div id="datetime"></div>

    <script src="lukashianShared.js"></script>
    <script src="lukashianPrecompute.js"></script>
    <script src="lukashianExecute.js"></script>
    <script>
        loadData().then(() => {
            updateTime();
            setInterval(updateTime, 1000);
        });

        function updateTime() {
            const now = Date.now();
            const utcDate = new Date(now).toUTCString();
            const lukashian = getLukashianDatetime(now);

            document.getElementById('datetime').innerHTML = `
                <p><strong>UTC:</strong> ${utcDate}</p>
                <p><strong>Lukashian:</strong> ${lukashian.formattedString}</p>
                <p>Year: ${lukashian.year}, Day: ${lukashian.day}, Beep: ${lukashian.beep}</p>
                <p>Iteration Count: ${lukashian.iterationCount}</p>
            `;
        }

        document.getElementById('precomputeBtn').addEventListener('click', () => {
            const start = parseInt(document.getElementById('startYear').value);
            const end = parseInt(document.getElementById('endYear').value);
            const data = precompute(start, end);
            const json = JSON.stringify(data, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'lukashian_data.json';
            a.click();
            URL.revokeObjectURL(url);
        });
    </script>
</body>

</html>